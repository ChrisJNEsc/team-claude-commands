# Analyze-Bug Session: FULFMNT-322

**Date:** 2025-12-22
**Command Version (Hash):** unknown
**Linear Issue:** FULFMNT-322
**Classification:** Frontend
**Outcome:** Working as Intended - No Fix Required

---

## Session Summary

Customer escalated that the "Item Type" dropdown (Material/Labor/Material & Labor) does not appear when editing existing products in Products & Services - only when adding new products. Investigation revealed this was a known issue (FULFMNT-322) that was fixed on 12/8 but intentionally reverted on 12/17. The development team confirmed this is intended behavior and will not be changed.

---

## User Inputs

**Input 1: Initial Report**
> Support - Web Escalation
> Troubleshooting Steps Taken: Logout/Login, Refresh Browser, Incognito
> Who Verified the Escalation? Skyler Holbrook
> Escalated By: Charlie Landeen
> Brief Description of Issue: "Item Type" option under products and services edit menu does not appear when editing an existing product, it appears only when trying to add a product or service
> User ID: m6nagx445kwrf7ky3mku9mo
> Date/Time Issue Occurred: 12/19/25 4:32
> Specific Record Impacted: Product and Services
> Steps to Replicate / Steps to View: Pulled it up in their account and in my test account. Editing products and services
> Expected Results: the item type dropdown needs to appear
> Actual Results: dropdown menu does not appear
> Can you Replicate in Logo's Account? Yes
> Did you Test in Test Account? Yes
> Can you Replicate in Test Account? Yes (charlie.landeen@jobnimbus.com)
> Computer OS Type: MacOS
> Browser: Chrome 143.0.7499.147

**Input 2:**
> Can we make a slack message to ask the team what we want to do about this?

**Input 3:**
> No. The development team determined this is intended and they will not be implementing this going forward.

---

## Claude's Analysis & Thinking

### Classification
- **Decision:** Frontend
- **Confidence:** High
- **Reasoning:** Dropdown appears during "add" but not "edit" - classic UI conditional rendering bug. No API errors reported. Same behavior across multiple accounts.

### Investigation Steps
1. Extracted bug report details from escalation
2. Classified as Frontend issue based on UI conditional rendering symptoms
3. Ran duplicate check in Linear - found FULFMNT-322 and FULFMNT-266
4. Discovered FULFMNT-322 was marked "Done" but had two PRs attached
5. Investigated PR history - found original fix was REVERTED
6. Retrieved PR #1673 (original fix) and PR #1691 (revert) details
7. Identified the code: `isItemTypeVisible()` in `Product.js` checks `!isEditMode()`
8. Drafted Slack message for team clarification
9. Received confirmation this is intended behavior

### Code Analysis
- **Repository:** webappui (legacy Angular)
- **Files Examined:**
  - `src/JobNimbus.Web/js/Objects/Product.js` - `isItemTypeVisible()` function
- **Root Cause:** Intentional design - the `isItemTypeVisible()` function returns `canLaborMaterial() && !isEditMode()`, deliberately hiding the Item Type dropdown in edit mode

### Fix Proposal
- **Approach:** None - Working as Intended
- **Files to Change:** N/A
- **Risks:** N/A

---

## Outputs

- **Linear Ticket:** [FULFMNT-322](https://linear.app/jobnimbus/issue/FULFMNT-322) - Existing, status remains Done
- **PR Created:** Not created (fix was previously attempted and reverted)
- **Branch:** N/A

---

## Key Learnings

- Always check PR attachments on "Done" Linear tickets - a ticket can be "Done" even if the fix was later reverted
- The revert PR (#1691) happened only 5 days before the customer escalation, which explains the timing
- FULFMNT-322 description mentioned this was "functionality that we previously had but with NSE was taken away" - the team decided to keep it removed
- Customer workaround: Create new product with correct Item Type, deactivate old product

---

## Customer Response Template

```
The Item Type field (Material/Labor/Material & Labor) is only available when
initially creating a product. Once a product is created, the Item Type cannot
be changed through the edit menu.

Workaround: If you need to change a product's Item Type, you can:
1. Create a new product with the correct Item Type
2. Deactivate the old product

This is current expected behavior.
```

---

*Session captured: 2025-12-22*
*Command Version: unknown*
*Saved by /save-session*
